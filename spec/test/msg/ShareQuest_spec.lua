local v0={};local v1=string.char;local v2=string.byte;local v3=string.sub;local v4=bit32 or bit ;local v5=v4.bxor;local v6=table.concat;local v7=table.insert;local function v8(v14,v15) local v16={};for v26=1, #v14 do v7(v16,v1(v5(v2(v3(v14,v26,v26 + 1 )),v2(v3(v15,1 + (v26% #v15) ,1 + (v26% #v15) + 1 )))%256 ));end return v6(v16);end local v9=require(v8("\194\211\222\38\169\186\195\26\222\205\150\39\243\178\203\26\212\209","\126\177\163\187\69\134\219\167")):Build();local v10=require(v8("\48\221\47\198\179\38\219\47\203\232\48","\156\67\173\74\165"));local v11=require(v8("\39\167\76\21\243\33\71\57\178\4\19\178\48","\38\84\215\41\118\220\70"));local v12=[[
  quest:
    name: Shared Quest
    description: I sure hope these tests pass!
  objectives:
    - kill 5 Chicken
    - talk-to 3 "Stormwind Guard"
    - use-emote dance 2 Cow
]];local v13=v12   .. v8("\58\86\98\0\251\65\3\43\0\251\84\76\72\82\190\16\86\46\23\232\85\26\120\82\171","\158\48\118\66\114") ;describe(v8("\152\44\17\36\118\148\238\174\55\4","\155\203\68\112\86\19\197"),function() local v17=0;local v18;local v19;local v20;local v21;local v22;local v23;local v24;local v25;while true do if (v17==1) then v25=nil;function v25(v32) local v33=0;local v34;while true do if (v33==0) then v34=v23:GetPublishPayload(v32);assert.equals(v9.MessageDistribution.Whisper,v34.distribution);v33=1;end if (v33==1) then assert.equals(v8("\12\196\57\233\82\107\224\244\64\151","\152\38\189\86\156\32\24\133"),v34.target);break;end end end setup(function() local v35=0;while true do if (v35==0) then v9:Init();v23=v10:SpyOnEvents(v9.MessageEvents);break;end end end);before_each(function() local v36=0;while true do if (v36==1) then v11:ResetEnv(v9);v24=v9.QuestScriptCompiler:Compile(v12);v36=2;end if (v36==0) then v9:Advance();v23:Reset();v36=1;end if (v36==2) then v11:SetPlayerGroup(v9,v8("\204\118\149\114\197","\38\156\55\199"));break;end end end);v17=2;end if (v17==0) then v18,v19=v9.QuestLog,v9.QuestStatus;v20=v9.QuestArchive;v21,v22=v9.QuestCatalog,v9.QuestCatalogStatus;v23,v24=nil;v17=1;end if (v17==2) then describe(v8("\191\117\121\38\83\117\186\82\189\120\111\60\83\125\233\3\187\117\125\58\22\112","\35\200\29\28\72\115\20\154"),function() local v37=0;while true do if (1==v37) then it(v8("\22\178\142\57\153\11\180\157\54\213\11\190\203\38\204\7\169\159\36\153\3\168\142\119\203\7\176\142\52\205\7\190","\185\98\218\235\87"),function() local v55=0;while true do if (0==v55) then v24.name=nil;assert.has_error(function() v9:ShareQuest(v24);end);break;end end end);break;end if (v37==0) then it(v8("\13\183\212\209\205\61\33\28\172\197\159\158\56\53\13\170\194\159\132\63\116\26\179\212\222\159\41\48\89\176\223\159\157\57\54\21\182\194\215","\84\121\223\177\191\237\76"),function() local v56=0;local v57;local v58;while true do if (1==v56) then v57,v58=v23:GetPublishPayload(v8("\138\67\204\179\46\121\62\215\178\66\204","\161\219\54\169\192\90\48\80"));assert.is_nil(v58.status);break;end if (v56==0) then v24.status=v9.QuestStatus.Active;v9:ShareQuest(v24);v56=1;end end end);it(v8("\93\74\5\43\9\83\21\32\90\86\64\53\91\77\7\55\76\81\19\101\64\81\64\38\69\71\1\55\76\70\64\42\71\2\16\48\75\78\9\54\65","\69\41\34\96"),function() local v59=0;local v60;local v61;while true do if (v59==0) then v24.objectives[2 -1 ].progress=1 -0 ;v9:ShareQuest(v24);v59=1;end if (v59==1) then v60,v61=v23:GetPublishPayload(v8("\141\214\210\25\22\2\178\213\222\30\7","\75\220\163\183\106\98"));assert.equals(0 + 0 ,v61.objectives[1475 -(1329 + 145) ].progress);break;end end end);v37=1;end end end);describe(v8("\220\52\34\232\158\171\139\47\47\231\204\175\207\124\54\243\219\185\223\124\46\245\158\184\206\63\34\239\200\175\207","\202\171\92\71\134\190"),function() local v38;before_each(function() local v41=0;while true do if (0==v41) then v9:ShareQuest(v24,true);v38=v24;break;end end end);after_each(function() local v42=0;while true do if (v42==1) then v20:DeleteAll();v9:Advance();break;end if (v42==0) then v21:DeleteAll();v18:DeleteAll();v42=1;end end end);it(v8("\61\201\41\134\105\213\36\141\105\210\36\137\59\196\40\200\56\212\41\155\61\129\37\155\105\210\45\158\44\197\108\156\38\129\56\128\44\129\29\157\44\210\56\171\40\213\45\132\38\198","\232\73\161\76"),function() local v43=0;local v44;while true do if (v43==1) then assert.is_not_nil(v44);assert.same(v38,v44.quest);break;end if (v43==0) then v9:Advance();v44=v21:FindByID(v38.questId);v43=1;end end end);describe(v8("\186\215\70\29\10\179\220\2\76\11\190\202\86\29\23\168\153\67\81\12\190\216\70\68\94\178\215\2\73\22\190\153\97\92\10\186\213\77\90","\126\219\185\34\61"),function() local v45=0;local v46;while true do if (1==v45) then it(v8("\162\225\47\197\88\160\54\208\179\251\106\216\16\175\33\194\178\169\59\222\29\189\39\135\160\236\56\216\17\161\61\212\246\232\56\206\88\189\50\209\179\237\106\223\23\238\39\207\179\169\9\202\12\175\63\200\177","\167\214\137\74\171\120\206\83"),function() local v65=0;local v66;while true do if (1==v65) then v21:Save(v46);v9:Advance();v65=2;end if (v65==2) then v66=v21:FindByID(v38.questId);assert.same(v38,v66.quest);break;end if (0==v65) then v46.quest.metadata.compileDate=v38.metadata.compileDate-(972 -(140 + 831)) ;v46.quest.metadata.hash=v38.metadata.hash   .. v8("\198\244\59\91\254\162\153\245\60\73","\199\235\144\82\61\152") ;v65=1;end end end);it(v8("\19\30\188\37\71\24\188\60\2\4\249\56\15\23\171\46\3\86\168\62\2\5\173\107\17\19\171\56\14\25\183\56\71\1\176\63\15\86\173\35\2\86\170\42\10\19\249\35\6\5\177\107\6\4\188\107\9\25\173\107\20\23\175\46\3\86\173\36\71\2\177\46\71\53\184\63\6\26\182\44","\75\103\118\217"),function() local v67=0;local v68;while true do if (v67==1) then v21:Save(v46);v9:Advance();v67=2;end if (0==v67) then v46.quest.metadata.compileDate=v38.metadata.compileDate-(1851 -(1409 + 441)) ;v46.quest.metadata.hash=v38.metadata.hash;v67=1;end if (v67==2) then v68=v21:FindByID(v38.questId);assert.same(v46.quest,v68.quest);break;end end end);v45=2;end if (v45==0) then v46=nil;before_each(function() local v69=0;while true do if (v69==0) then v46=v21:NewCatalogItem(v9:CopyTable(v38));v46.quest.name=v46.quest.name   .. v8("\76\134\125\115\106\118\255\232\11\135","\135\108\174\62\18\30\23\147") ;v69=1;end if (v69==1) then v21:SaveWithStatus(v46,v22.Invited);break;end end end);v45=1;end if (v45==2) then it(v8("\211\92\117\26\249\17\203\80\117\6\249\13\207\85\98\17\189\94\214\65\117\7\173\94\209\81\98\7\176\17\201\71\48\21\171\27\135\90\127\0\249\13\198\66\117\16\249\10\200\20\100\28\188\94\228\85\100\21\181\17\192","\126\167\52\16\116\217"),function() local v70=0;local v71;while true do if (v70==0) then v46.quest.metadata.compileDate=v38.metadata.compileDate + (719 -(15 + 703)) ;v46.quest.metadata.hash=v38.metadata.hash   .. v8("\133\42\41\134\178\28\238\205\32\52","\156\168\78\64\224\212\121") ;v70=1;end if (1==v70) then v21:Save(v46);v9:Advance();v70=2;end if (2==v70) then v71=v21:FindByID(v38.questId);assert.same(v46.quest,v71.quest);break;end end end);it(v8("\19\230\160\192\71\253\173\207\21\235\161\142\22\251\160\221\19\253\229\193\1\174\177\198\2\174\182\207\10\235\229\216\2\252\182\199\8\224\229\207\21\235\229\192\8\250\229\221\6\248\160\202\71\250\170\142\19\230\160\142\36\239\177\207\11\225\162","\174\103\142\197"),function() local v72=0;local v73;while true do if (v72==1) then v21:Save(v46);v9:Advance();v72=2;end if (3==v72) then v23:AssertNotPublished(v8("\103\61\90\43\49\119\246\64\33\75\61\1\75\232\90\33\92\57\49\91","\152\54\72\63\88\69\62"));break;end if (v72==2) then v73=v21:FindByID(v38.questId);assert.same(v46.quest,v73.quest);v72=3;end if (0==v72) then v46.quest.metadata.compileDate=v38.metadata.compileDate;v46.quest.metadata.hash=v38.metadata.hash;v72=1;end end end);break;end end end);describe(v8("\213\202\234\28\192\204\235\28\197\209\235\79\192\132\231\79\148\197\226\78\209\197\234\69\148\205\224\28\192\204\235\28\229\209\235\79\192\232\225\91","\60\180\164\142"),function() local v47=0;local v48;local v49;while true do if (v47==1) then it("then the sender is notified of 'duplicate' quests",function() local v74=0;while true do if (v74==0) then v9:Advance();v25(v8("\137\252\222\215\172\192\213\210\177\253\222\224\173\249\215\205\187\232\207\193","\164\216\137\187"));break;end end end);it("then the sender is not notified of 'non-duplicate' quests",function() local v75=0;while true do if (v75==0) then v18:SaveWithStatus(v48,v19.Abandoned);v9:Advance();v75=1;end if (v75==1) then v23:AssertNotPublished(v8("\227\243\52\161\178\215\5\196\239\37\183\130\235\27\222\239\50\179\178\251","\107\178\134\81\210\198\158"));break;end end end);v47=2;end if (v47==0) then v48,v49=nil;before_each(function() local v76=0;while true do if (v76==1) then v21:SaveWithStatus(v49,v22.Accepted);v48=v9:CopyTable(v49.quest);v76=2;end if (v76==0) then v49=v21:NewCatalogItem(v9:CopyTable(v38));v49.quest.name=v49.quest.name   .. v8("\24\22\38\40\51\236\30\87\89\76","\114\56\62\101\73\71\141") ;v76=1;end if (v76==2) then v18:SaveWithStatus(v48,v19.Active);break;end end end);v47=1;end if (v47==2) then it(v8("\44\6\135\200\234\55\2\134\195\184\120\13\131\210\171\52\1\133\134\188\61\28\145\207\165\54\29\194\209\163\52\2\194\213\190\49\2\142\134\168\61\78\151\214\174\57\26\135\194","\202\88\110\226\166"),function() local v77=0;local v78;while true do if (v77==2) then v78=v21:FindByID(v38.questId);assert.same(v38,v78.quest);v77=3;end if (v77==1) then v21:Save(v49);v9:Advance();v77=2;end if (3==v77) then assert.not_same(v49.quest,v78.quest);break;end if (v77==0) then v49.quest.metadata.compileDate=v49.quest.metadata.compileDate-(5 + 5) ;v49.quest.metadata.hash=v49.quest.metadata.hash   .. v8("\142\11\139\241\204\198\29\135\249\222","\170\163\111\226\151") ;v77=1;end end end);break;end end end);describe(v8("\16\62\182\120\90\63\44\81\33\167\61\93\35\105\24\35\242\57\66\37\44\16\52\171\120\71\57\105\5\56\183\120\127\34\44\2\36\147\42\77\63\32\7\53","\73\113\80\210\88\46\87"),function() local v50=0;local v51;local v52;while true do if (v50==0) then v51,v52=nil;before_each(function() local v79=0;while true do if (v79==1) then v21:SaveWithStatus(v52,v22.Accepted);v51=v9:CopyTable(v52.quest);v79=2;end if (v79==2) then v51.status=v19.Completed;v20:Save(v51);break;end if (v79==0) then v52=v21:NewCatalogItem(v9:CopyTable(v24));v52.quest.name=v52.quest.name   .. v8("\193\100\238\19\243\128\32\194\21\174","\135\225\76\173\114") ;v79=1;end end end);v50=1;end if (v50==1) then it("then the sender is notified of 'duplicate' quests",function() local v80=0;while true do if (v80==0) then v9:Advance();v25(v8("\43\248\189\163\184\148\169\12\228\172\181\136\168\183\22\228\187\177\184\184","\199\122\141\216\208\204\221"));break;end end end);it("then the sender is not notified of 'non-duplicate' quests",function() local v81=0;while true do if (v81==1) then v9:Advance();v23:AssertNotPublished(v8("\156\200\21\227\108\223\163\203\25\228\125\210\184\205\28\249\123\247\185\216","\150\205\189\112\144\24"));break;end if (v81==0) then v51.status=v19.Failed;v20:Save(v51);v81=1;end end end);break;end end end);end);describe(v8("\50\140\186\66\68\137\81\3\45\133\173\73\0\200\0\5\32\151\171\12\13\155\81\2\32\135\186\69\18\141\21\80\50\141\171\68\68\154\20\1\48\141\173\73\9\141\31\4\54","\112\69\228\223\44\100\232\113"),function() local v39=0;local v40;while true do if (v39==1) then describe(v8("\213\17\3\147\162\116\131\148\15\11\210\175\121\148\148\18\2\214\162\111\198\192\23\2\147\164\121\151\193\22\21\214\187\121\136\192\12","\230\180\127\103\179\214\28"),function() local v62=0;while true do if (0==v62) then before_each(function() v11:SetPlayerInfo(v9,{[v8("\128\0\73\67\232","\128\236\101\63\38\132\33")]=498 -(262 + 176) });end);it(v8("\184\161\20\74\246\255\199\169\233\0\81\179\248\219\236\160\2\4\165\234\217\169\173\81\80\185\171\219\164\172\81\71\183\255\206\160\166\22","\175\204\201\113\36\214\139"),function() local v106=0;local v107;while true do if (v106==0) then v9:Advance();v107=v21:FindByID(v40.questId);v106=1;end if (1==v106) then assert.is_not_nil(v107);assert.same(v40,v107.quest);break;end end end);break;end end end);describe(v8("\70\194\49\156\16\79\201\117\204\8\70\213\48\206\68\67\195\48\207\68\73\195\33\156\9\66\201\33\156\16\79\201\117\206\1\86\217\60\206\1\74\201\59\200\23","\100\39\172\85\188"),function() local v63=0;while true do if (v63==0) then before_each(function() v11:SetPlayerInfo(v9,{[v8("\161\125\175\133\63","\83\205\24\217\224")]=1722 -(345 + 1376) });end);it(v8("\242\205\200\51\166\209\197\56\166\212\216\56\245\209\141\52\245\133\222\41\239\201\193\125\245\196\219\56\226\133\217\50\166\209\197\56\166\230\204\41\231\201\194\58","\93\134\165\173"),function() local v108=0;local v109;while true do if (v108==1) then assert.is_not_nil(v109);assert.same(v40,v109.quest);break;end if (v108==0) then v9:Advance();v109=v21:FindByID(v40.questId);v108=1;end end end);v63=1;end if (v63==1) then it(v8("\170\250\196\204\122\218\186\123\254\225\196\204\62\203\160\62\183\225\129\204\53\218\187\120\183\247\197","\30\222\146\161\162\90\174\210"),function() local v110=0;while true do if (0==v110) then v9:Advance();v25(v8("\212\91\117\25\241\103\126\28\236\90\117\56\224\95\101\3\247\75\125\15\235\90\99","\106\133\46\16"));break;end end end);break;end end end);break;end if (v39==0) then v40=nil;before_each(function() local v64=0;while true do if (v64==0) then v40=v9.QuestScriptCompiler:Compile(v13);v9:ShareQuest(v40,true);break;end end end);v39=1;end end end);describe(v8("\79\40\118\242\26\65\24\51\123\253\72\69\92\96\112\253\78\65\84\47\116\188\83\84\93\45\51\245\73\0\74\37\112\249\83\86\93\36\51\180\86\69\95\33\112\229\26\66\93\40\114\234\83\79\74\105","\32\56\64\19\156\58"),function() it(v8("\78\192\224\88\26\230\136\95\136\244\67\95\225\148\26\193\246\22\94\247\131\86\193\235\83\94","\224\58\168\133\54\58\146"),function() local v53=0;local v54;while true do if (v53==1) then v9:Advance();v25(v8("\234\158\20\230\173\245\193\205\130\5\240\157\217\204\215\130\31\240\189","\175\187\235\113\149\217\188"));break;end if (v53==0) then v54=v9.QuestCatalog:NewCatalogItem(v24);v9.MessageEvents:Publish(v8("\104\67\78\238\97\175\137\29\80\66\78","\107\57\54\43\157\21\230\231"),nil,v54);v53=1;end end end);end);break;end end end);