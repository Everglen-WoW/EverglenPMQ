local v0={};local v1=string.char;local v2=string.byte;local v3=string.sub;local v4=bit32 or bit ;local v5=v4.bxor;local v6=table.concat;local v7=table.insert;local function v8(v26,v27) local v28={};for v53=1, #v26 do v7(v28,v1(v5(v2(v3(v26,v53,v53 + 1 )),v2(v3(v27,1 + (v53% #v27) ,1 + (v53% #v27) + 1 )))%256 ));end return v6(v28);end local v9,v10=...;local v11=v10.QuestDrafts;local v12=v10.MainMenu:NewMenuScreen(v8("\224\214\222\54\242\159\213\31\215\215\254\33\239\175\234\27\223\214","\126\177\163\187\69\134\219\167"));local v13;local v14;local function v15() return v13.nameField:IsDirty() or v13.scriptEditor:IsDirty() ;end local function v16() local v29=0;while true do if (v29==0) then v13.nameField:SetDirty(false);v13.scriptEditor:SetDirty(false);break;end end end local function v17() v10.MainMenu:NavToMenuScreen(v8("\18\216\47\214\232\7\223\43\195\232\15\196\57\209\209\38\195\63","\156\67\173\74\165"));end local function v18(v30) local v31=0;local v32;while true do if (0==v31) then v30.draftName=v13.nameField:GetText();v32=v13.scriptEditor:GetText();v31=1;end if (v31==1) then v32=v32:gsub(v8("\40\180\12\14\249\62\3\44\242\81\83\164\99\94\113\175\12\14","\38\84\215\41\118\220\70"),"");v32=v32:gsub(v8("\76\4","\158\48\118\66\114"),"");v31=2;end if (v31==2) then v30.script=v32;break;end end end local function v19() local v33=0;local v34;local v35;while true do if (v33==1) then v35=v34.script;v35=v35:gsub(v8("\183\39\85\46\54\189\190\179\97\8\115\107\224\227\238\60\85\46","\155\203\68\112\86\19\197"),"");v33=2;end if (v33==0) then v34=v10:CopyTable(v14);v18(v34);v33=1;end if (v33==2) then v35=v35:gsub(v8("\90\207","\152\38\189\86\156\32\24\133"),"");return v10.QuestScriptCompiler:TryCompile(v35,v34.parameters);end end end local function v20() local v36=0;while true do if (1==v36) then v11:Save(v14);v10.Logger:Info("Brouillon sauvegardé - %s",v14.draftName);break;end if (0==v36) then if ( not v14 or (2397==2822)) then return;end v18(v14);v36=1;end end end local function v21() if (v15() or (4245==4631)) then v10.StaticPopups:Show(v8("\217\79\174\82\216\69\166\64\232","\38\156\55\199"),v20);else v17();end end local function v22() local v37=0;local v38;local v39;while true do if (v37==1) then if ((198<=4365) and  not v38) then local v61=0;while true do if (v61==0) then v10.Logger:Warn("Votre quête contient une erreur :\n%s",v39);return;end end end v10.Logger:Info("Votre quête est valide ! Aucune erreur détectée.");break;end if (v37==0) then if ((4276>=3914) and  not v14) then return;end v38,v39=v19();v37=1;end end end v12.Create=function(v40,v41) local v42=0;local v43;local v44;local v45;while true do if (v42==0) then v43=v10.CustomWidgets:CreateWidget(v8("\156\120\100\60\58\122\234\86\188","\35\200\29\28\72\115\20\154"),v41,v8("\55\176\220\159\137\57\116\27\173\222\202\132\32\56\22\177","\84\121\223\177\191\237\76"));v43:SetPoint(v8("\143\121\249\140\31\118\4","\161\219\54\169\192\90\48\80"),v41,v8("\125\109\48\9\108\100\52","\69\41\34\96"));v43:SetPoint(v8("\136\236\231\56\43\12\148\247","\75\220\163\183\106\98"),v41,v8("\54\149\187\5\240\37\146\191","\185\98\218\235\87"));v42=1;end if (v42==2) then v44:AddButton(v8("\254\47\44\137\176\28\238","\156\168\78\64\224\212\121"),v22,{[v8("\6\224\166\198\8\252","\174\103\142\197")]=v8("\100\1\120\16\17","\152\54\72\63\88\69\62")});v45=v10.CustomWidgets:CreateWidget(v8("\231\199\252\85\196\208\203\88\221\208\225\78","\60\180\164\142"),v41,"Script de quête");v45:SetPoint(v8("\108\113\53\5\2\203\38","\114\56\62\101\73\71\141"),v43,v8("\154\198\239\240\151\196\247\225\158\221","\164\216\137\187"));v42=3;end if (v42==3) then v45:SetPoint(v8("\240\201\5\134\137\211\57\251\193\25\134","\107\178\134\81\210\198\158"),v44,v8("\12\33\178\244\131\31\38\182","\202\88\110\226\166"));v45.GetText=function(v60) if ((4782>4676) and v60.editBox and v60.editBox.GetText) then return v60.editBox:GetText();elseif ((4864>2197) and v60.scrollFrame and v60.scrollFrame.editBox and v60.scrollFrame.editBox.GetText) then return v60.scrollFrame.editBox:GetText();else local v64=0;while true do if (v64==0) then print(v8("\248\42\176\197\239\246\61\191\183\235\214\12\151\249\138\228\10\150\195\207\219\27\202\190\138\199\6\145\231\197\205\6\128\251\207\131\28\151\229\138\208\12\144\254\218\215\42\134\254\222\204\29","\170\163\111\226\151"));return nil;end end end end;v41.nameField=v43;v42=4;end if (v42==1) then v44=v10.CustomWidgets:CreateWidget(v8("\233\41\51\242\209\164\251\61\41\227","\202\171\92\71\134\190"),v41,v8("\11\238\24\188\6\236","\232\73\161\76"));v44:AddButton(v8("\137\220\86\82\11\169","\126\219\185\34\61"),v21,{[v8("\13\192\93\122\113\101","\135\108\174\62\18\30\23\147")]=v8("\154\204\12\255","\167\214\137\74\171\120\206\83")});v44:AddButton(v8("\184\241\39\75\253\160\138\226\54\88\234","\199\235\144\82\61\152"),v20,{[v8("\6\24\186\35\8\4","\75\103\118\217")]=v8("\245\125\87\60\141","\126\167\52\16\116\217")});v42=2;end if (v42==4) then v41.scriptEditor=v45;break;end end end;v12.OnShowMenu=function(v46,v47,v48) local v49=0;while true do if (v49==2) then v10.Ace:ScheduleTimer(function() v47.scriptEditor.scrollFrame:SetVerticalScroll(1080 -(1020 + 60) );end,1423.033 -(630 + 793) );v16();v49=3;end if (3==v49) then v47.scriptEditor:RefreshStyle();break;end if (v49==1) then v47.nameField:SetText(v14.draftName);v47.scriptEditor:SetText(v14.script);v49=2;end if (v49==0) then v13=v47;if (v48 or (3700==2507)) then local v62=0;while true do if (v62==0) then v14=v11:FindByID(v48);if ((4474>=274) and  not v14) then local v67=0;while true do if (v67==0) then v10.Logger:Error(v8("\63\63\242\60\92\54\47\5\112\179\46\79\62\37\16\50\190\61\14\32\32\5\56\242\49\74\109\105\84\35","\73\113\80\210\88\46\87"),v48);return;end end end break;end end else local v63=0;while true do if (v63==1) then v14.script=[[
    quest:
      name: Nom de ma quête
      description: Dialogue pour le début de la quête.
      completion: Dialogue pour la fin de la quête.
    objectives:
      - ]];break;end if (v63==0) then v14=v11:NewDraft();v14.draftName="Nouveau brouillon de quête";v63=1;end end end v49=1;end end end;v12.OnLeaveMenu=function(v50,v51) local v52=0;while true do if (v52==0) then v13=nil;v14=nil;v52=1;end if (1==v52) then v51.nameField:SetText();v51.scriptEditor:SetText();break;end end end;